/*
* Kendo UI Beta v2012.1.229 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

(function(a,b){var c=document,d=a.extend,e=a.map,f=Math,g=window.kendo,h=g.Class,i=g.ui.Widget,j=g.deepExtend,k=g.dataviz,l=k.Axis,m=k.Box2D,n=k.ChartElement,o=k.NumericAxis,p=k.Ring,q=k.RootElement,r=k.RotationAnimation,s=k.append,t=k.animationDecorator,u=k.autoMajorUnit,v=k.defined,w=k.rotatePoint,x=k.round,y=k.uniqueId,z="#000",A=k.COORD_PRECISION,B=k.DEFAULT_HEIGHT,C=k.DEFAULT_WIDTH,D=f.PI/180,E="pointer",F="outside",G="inside",H="vertical",I=n.extend({init:function(a,b){var c=this,b,d=a.options;n.fn.init.call(c,b),b=c.options,b.id||(b.id=y()),b.fill=b.color,c.scale=a,b.value=f.min(f.max(b.value,d.min),d.max)},options:{shape:"needle",color:"#ea7001",value:0,capSize:.05,animation:{type:E}},value:function(a){var b=this,c=b.options,d=c.value,e=b.scale.options,g;if(arguments.length==0)return d;c._oldValue=c.value,c.value=f.min(f.max(a,e.min),e.max),b.repaint()},repaint:function(){var a=this,b=a.scale,d=a.options,e=a.elements[0],f;e.options.rotation[0]=b.getSlotAngle(d.value)-b.getSlotAngle(b.options.min),d.animation===!1?e.refresh(c.getElementById(d.id)):(f=new r(e,j(d.animation,{startAngle:b.getSlotAngle(d._oldValue)-b.getSlotAngle(b.options.min)})),f.setup(),f.play())},reflow:function(){var a=this,b=a.options,c=a.scale,d=c.ring,e=d.c,f=d.r*b.capSize;a.box=new m(e.x-f,e.y-f,e.x+f,e.y+f)},renderNeedle:function(a){var b=this,c=b.scale,d=c.ring,e=d.c,f=d.r,g=b.options,h=f*g.capSize,i=new m(e.x-f,e.y-f,e.x+f,e.y+f),k=i.width()/2,l=i.center(),n=c.getSlotAngle(c.options.min),o=90-n;g.animation!==!1&&j(g.animation,{startAngle:0,center:l}),j(g,{rotation:[c.getSlotAngle(g.value)-n,l.x,l.y]});return[a.createPolyline([w((i.x1+i.x2)/2,i.y1+c.options.minorTicks.size,l.x,l.y,o),w(l.x-h/2,l.y,l.x,l.y,o),w(l.x+h/2,l.y,l.x,l.y,o)],!0,g),a.createCircle([l.x,l.y],h,g)]},getViewElements:function(a){var b=this,c=b.options.shape,d=b.renderNeedle(a);b.elements=d;return d}}),J=o.extend({init:function(a){var b=this,c=b.options;c.majorUnit=u(b.options.min,b.options.max),c.minorUnit=c.majorUnit/5,l.fn.init.call(b,a)},options:{min:0,max:100,majorTicks:{size:15,alignment:G,color:z,width:.5},minorTicks:{size:10,alignment:G,color:z,width:.5},startAngle:-30,endAngle:210,labels:{position:G,padding:2}},reflow:function(a){var b=this,c=b.options,d=a.center(),e=f.min(a.height(),a.width())/2,g=b.ring||new k.Ring(d,e-c.majorTicks.size,e,c.startAngle,c.endAngle-c.startAngle);b.ring=g,b.box=g.getBBox(),b.arrangeLabels()},getSlotAngle:function(a){var b=this.options,c=b.startAngle,d=b.endAngle-c,e=b.min,f=b.max;return(a-e)/(f-e)*d+c},renderTicks:function(a){function h(d,e,f,g){var h=b.getTickAngles(d,e),i,j,k,l=g/e,m=h.length;for(i=0;i<m;i++){if(i%l==0)continue;k=d.point(h[i]),j=d.point(h[i],!0),c.push(a.createLine(j.x,j.y,k.x,k.y,{align:!1,stroke:f.color,strokeWidth:f.width}))}}var b=this,c=[],d=b.ring,e=d.clone(),f=b.options,g=f.minorTicks.size;h(d,f.majorUnit,f.majorTicks),f.labels.position==G?e.radius(e.r-g,!0):e.radius(e.ir+g),h(e,f.minorUnit,f.minorTicks,f.majorUnit);return c},arrangeLabels:function(){var a=this,b=a.options,c=a.ring.clone(),d=a.getTickAngles(c,b.majorUnit),e=a.labels,g=e.length,h=b.labels,i=h.padding,j=a.options.ringDistance=c.r*.05,k=a.options.ringSize=c.r*.1,l=b.ranges||[],n,o,p,q,r,s,t,u,v,w;h.position===G&&l.length&&(c.r-=k+j,c.ir-=k+j);for(t=0;t<g;t++)r=e[t],n=r.box.width()/2,o=r.box.height()/2,q=d[t],p=q*D,w=h.position===G,s=c.point(q,w),u=s.x+f.cos(p)*(n+i)*(w?1:-1),v=s.y+f.sin(p)*(o+i)*(w?1:-1),r.reflow(new m(u-n,v-o,u+n,v+o)),a.box.wrap(r.box)},getTickAngles:function(a,b){var c=this,d=c.options,e=d.max-d.min,f=a.angle,g=e/b,h=f/g,i=a.startAngle,j=i,k=[],l;for(l=0;l<g;l++)k.push(x(j,A)),j+=h;k.push(i+f);return k},renderRanges:function(a){function z(a,b,c){return{from:a,to:b,color:c}}var b=this,c=b.options,d=c.ranges||[],e=b.ring,g=[],h,i,j,k,l=d.length,m,n=c.rangePlaceholderColor,o=c.min,q=c.max,h,i,r,m,s=[],t,u=c.ringDistance,w=c.ringSize,x,y;s.push(z(o,q,n));if(l){c.labels.position===F?(j=e.ir-u,k=j-w):(j=e.r,k=j-w,e.r-=w+u,e.ir-=w+u);for(x=0;x<l;x++){m=d[x],h=v(m.from)?m.from:MIN_VALUE,i=v(m.to)?m.to:MAX_VALUE,m.from=f.max(f.min(i,h),o),m.to=f.min(f.max(i,h),q),segmentCount=s.length;for(r=0;r<segmentCount;r++){t=s[r];if(t.from<=m.from&&m.from<=t.to){s.push(z(m.from,m.to,m.color)),t.from<=m.to&&m.to<=t.to&&s.push(z(m.to,t.to,n)),t.to=m.from;break}}}for(x=0;x<s.length;x++)t=s[x],h=b.getSlotAngle(t.from),i=b.getSlotAngle(t.to),i-h!=0&&g.push(a.createRing(new p(e.c,k,j,h,i-h),{fill:t.color,fillOpacity:t.opacity,zIndex:-1}))}return g},getViewElements:function(a){var b=this,c=b.options,d=c.orientation===H,e=n.fn.getViewElements.call(b,a),f=b.getMinorTickPositions(),g;s(e,b.renderRanges(a)),s(e,b.renderTicks(a));return e}}),K=n.extend({init:function(a){n.fn.init.call(this,a),this.render()},options:{margin:{},background:"",border:{color:z,width:0}},reflow:function(a){var b=this,c=b.options,d=b.scale,e=b.pointer,f;d.reflow(a),f=d.box.clone(),e.scale=d,e.reflow(),f.wrap(e.box),b.box=f,b.fitScale(a),b.alignScale(a)},alignScale:function(a){var b=this,c=b.box.center(),d=a.center(),e=c.x-d.x,f=c.y-d.y,g=b.scale,h=b.pointer,i=g.ring;g.ring.c.x-=e,g.ring.c.y-=f,g.reflow(a),h.reflow(),b.box=g.box.clone().wrap(h.box)},fitScale:function(a){var b=this,c=b.scale,d=c.ring,e=b.box,g=f.abs(b.getDiff(e,a)),h=x(g,A),i=x(-g,A),j,k,l,m;for(;;){if(h!=m){k=b.getPlotBox(h,a,d);if(0<=k&&k<=2)break}if(i!=m){l=b.getPlotBox(i,a,d);if(0<=l&&l<=2)break}k>0&&l>0?m=h*2:k<0&&l<0?m=i*2:m=x((h+i)/2||1,A),j=b.getPlotBox(m,a,d);if(0<=j&&j<=2)break;j>0?(i=m,l=j):(h=m,k=j)}},getPlotBox:function(a,b,c){var d=this,e=d.options,f=d.scale,g=d.pointer;c=c.clone(),c.r+=a,c.ir+=a,f.ring=c,f.reflow(b),g.scale=f,g.reflow(),d.box=f.box.clone().wrap(g.box);return d.getDiff(d.box,b)},getDiff:function(a,b){return f.min(b.width()-a.width(),b.height()-a.height())},render:function(){var a=this,b=a.options,c;c=a.scale=new J(b.scale),a.append(a.scale),a.pointer=new I(c,b.pointer),a.append(a.pointer)}}),L=i.extend({init:function(b,c){var d=this,e,f,g,h=k.ui.themes.gauge||{},l=0;i.fn.init.call(d,b),e=j({},d.options,c),g=e.theme,f=g?h[g]||h[g.toLowerCase()]:{},d.options=j({},f,e),a(b).addClass("k-gauge"),d.redraw()},value:function(a){if(arguments.length===0)return this._pointers[0].value();this._pointers[0].value(a)},redraw:function(){var a=this,b=a.options,c=a.element,d=a._model=a._getModel(),e=a._plotArea=d._plotArea,f=k.ui.defaultView(),g=a._view=f.fromModel(d);c.css("position","relative"),a._viewElement=g.renderTo(c[0])},_getModel:function(){var a=this,b=a.options,c=a.element,d=new q(j({width:c.width()||C,height:c.height()||B,transitions:b.transitions},b.gaugeArea)),e;e=d._plotArea=new K(b),a._pointers=[e.pointer],d.append(e),d.reflow();return d},options:{name:"Gauge",transitions:!0,gaugeArea:{background:""}},svg:function(){var a=this._getModel(),b=Chart.SVGView.fromModel(a);return b.render()}}),M=t(E,r);k.ui.plugin(L),j(k,{GaugePlotArea:K,Pointer:I,PointerAnimationDecorator:M,RadialScale:J})})(jQuery)